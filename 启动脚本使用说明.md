# 启动脚本使用说明

## 问题说明

原来的启动脚本（`启动前端.bat` 和 `启动后端.bat`）由于编码问题无法正常使用，显示乱码错误。

## 解决方案

已创建新的启动脚本，使用标准ASCII编码，避免中文乱码问题：

### 新的启动脚本

1. **start-backend.bat** - 启动后端服务
2. **start-frontend.bat** - 启动前端服务

## 使用方法

### 方法1：双击运行（推荐）

直接双击对应的bat文件：
- 双击 `start-backend.bat` 启动后端
- 双击 `start-frontend.bat` 启动前端

### 方法2：命令行运行

在项目根目录打开命令行：

**启动后端**：
```bash
start-backend.bat
```

**启动前端**：
```bash
start-frontend.bat
```

### 方法3：PowerShell运行

在项目根目录打开PowerShell：

**启动后端**：
```powershell
.\start-backend.bat
```

**启动前端**：
```powershell
.\start-frontend.bat
```

## 启动顺序

建议按以下顺序启动：

1. **先启动后端**：运行 `start-backend.bat`
   - 等待看到 "Running on http://127.0.0.1:5000" 提示
   
2. **再启动前端**：运行 `start-frontend.bat`
   - 等待看到 "Local: http://localhost:5173/" 提示

3. **访问应用**：在浏览器中打开 http://localhost:5173

## 启动成功标志

### 后端启动成功

看到以下输出表示后端启动成功：
```
========================================
   Game Backend Server
========================================

[1/2] Checking Python...
Python 3.11.0

[2/2] Starting Flask backend...
Backend URL: http://127.0.0.1:5000

Press Ctrl+C to stop
========================================

 * Serving Flask app 'app'
 * Debug mode: on
 * Running on http://127.0.0.1:5000
 * Debugger is active!
```

### 前端启动成功

看到以下输出表示前端启动成功：
```
========================================
   Game Frontend Server
========================================

[1/3] Checking Node.js...
v24.12.0

[2/3] Checking frontend directory...
Frontend directory: interfaces\client

[3/3] Starting Vite dev server...
Frontend URL: http://localhost:5173

Press Ctrl+C to stop
========================================

VITE v7.2.6  ready in 931 ms
➜  Local:   http://localhost:5173/
➜  Network: http://192.168.10.11:5173/
```

## 停止服务

在启动脚本的命令行窗口中：
- 按 `Ctrl + C` 停止服务
- 或直接关闭命令行窗口

## 常见问题

### Q1: 提示 "Python not found"

**原因**：系统未安装Python或Python未添加到环境变量

**解决方法**：
1. 下载并安装 Python 3.10 或更高版本
2. 安装时勾选 "Add Python to PATH"
3. 重启命令行窗口

### Q2: 提示 "Node.js not found"

**原因**：系统未安装Node.js或Node.js未添加到环境变量

**解决方法**：
1. 下载并安装 Node.js 18 或更高版本
2. 安装时会自动添加到PATH
3. 重启命令行窗口

### Q3: 前端提示 "Frontend directory not found"

**原因**：不在项目根目录运行脚本

**解决方法**：
1. 确保在项目根目录（包含 `interfaces` 文件夹的目录）
2. 使用 `cd` 命令切换到正确的目录

### Q4: 端口被占用

**错误信息**：
- 后端：`Address already in use: 5000`
- 前端：`Port 5173 is in use`

**解决方法**：

**Windows**：
```bash
# 查看占用端口的进程
netstat -ano | findstr :5000
netstat -ano | findstr :5173

# 结束进程（替换<PID>为实际进程ID）
taskkill /PID <PID> /F
```

**或者修改端口**：
- 后端：修改 `interfaces/web_api/app.py` 中的端口号
- 前端：修改 `interfaces/client/vite.config.js` 中的端口号

### Q5: 前端首次启动失败

**原因**：未安装npm依赖

**解决方法**：
```bash
cd interfaces/client
npm install
```

然后重新运行 `start-frontend.bat`

### Q6: 后端启动失败，提示模块缺失

**原因**：未安装Python依赖

**解决方法**：
```bash
pip install -r requirements.txt
```

然后重新运行 `start-backend.bat`

## 手动启动（备选方案）

如果启动脚本仍然有问题，可以手动启动：

### 手动启动后端

```bash
python -m interfaces.web_api.app
```

### 手动启动前端

```bash
cd interfaces/client
npm run dev
```

## 访问地址

启动成功后，可以通过以下地址访问：

### 本地访问
- **前端**：http://localhost:5173
- **后端API**：http://127.0.0.1:5000

### 局域网访问
- **前端**：http://192.168.10.11:5173
- **后端API**：http://192.168.10.11:5000

（IP地址根据实际网络环境可能不同）

## 开发建议

### 1. 使用两个命令行窗口

- 窗口1：运行后端服务
- 窗口2：运行前端服务

这样可以同时查看两个服务的日志输出。

### 2. 保持服务运行

开发时保持两个服务一直运行：
- 后端：代码修改后会自动重启（Flask debug模式）
- 前端：代码修改后会自动热更新（Vite HMR）

### 3. 查看日志

- 后端日志：在后端命令行窗口查看
- 前端日志：在前端命令行窗口查看
- 浏览器控制台：查看前端运行时错误

### 4. 使用开发工具

- **浏览器开发者工具**：F12打开，查看网络请求和控制台
- **Vue DevTools**：安装浏览器扩展，调试Vue组件
- **Postman/Insomnia**：测试后端API接口

## 生产环境部署

启动脚本仅用于开发环境。生产环境部署请参考：

- 后端：使用 Gunicorn 或 uWSGI
- 前端：使用 `npm run build` 构建静态文件，用 Nginx 提供服务

## 文件清单

### 新创建的文件
- `start-backend.bat` - 后端启动脚本（英文版）
- `start-frontend.bat` - 前端启动脚本（英文版）
- `启动脚本使用说明.md` - 本说明文档

### 已删除的文件
- `启动前端.bat` - 旧版前端启动脚本（编码问题）
- `启动后端.bat` - 旧版后端启动脚本（编码问题）

## 技术说明

### 为什么旧脚本会乱码？

1. **编码问题**：旧脚本可能使用了UTF-8 BOM编码，在某些Windows环境下会导致乱码
2. **中文字符**：bat文件中的中文字符在不同编码下显示不一致
3. **系统差异**：不同Windows版本对bat文件编码的处理可能不同

### 新脚本的改进

1. **使用ASCII编码**：避免编码问题
2. **英文提示**：避免中文乱码
3. **标准格式**：遵循Windows批处理文件标准

---

**创建日期**：2026年1月18日  
**版本**：v1.0  
**适用系统**：Windows 10/11
