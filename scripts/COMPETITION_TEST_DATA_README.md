# 联盟精英争霸赛测试数据说明

## 概述

本脚本创建了用于验证联盟积分排名和往届战绩功能的测试数据。

## 运行脚本

```bash
cd scripts
python create_competition_test_data.py
```

## 创建的测试数据

### 1. 测试联盟（10个）

| 排名 | 联盟名称 | 盟主ID | 威望 | 联盟ID |
|------|---------|--------|------|--------|
| 1 | 『幻閣不滅◇君臨天下』 | 4053 | 240 | 8 |
| 2 | 暗河\|风起云涌 | 4054 | 118 | 4 |
| 3 | 明月 | 4055 | 86 | 9 |
| 4 | 【情义世家】 | 4054 | 54 | 10 |
| 5 | ぞ紫月遮天づ | 4057 | 48 | 11 |
| 6 | 玖幽之都 | 4058 | 41 | 12 |
| 7 | 手牵手,一起走。 | 4059 | 37 | 13 |
| 8 | 蹲街_浅/唱_季沫✨ | 4060 | 34 | 14 |
| 9 | X、低调の | 4061 | 17 | 15 |
| 10 | 恶人谷❄ | 4062 | 14 | 16 |

### 2. 测试届次

- **届次标识**: 2026-01-11
- **届次名称**: 第2026-01-11届
- **状态**: 已结束（finished）

### 3. 测试联盟详情（暗河|风起云涌，第2名）

#### 联盟战绩
- 威望: 118
- 排名: 第2名

#### 战队战绩
- 犊虎队荣誉晋级4强
- 白虎队荣誉晋级4强
- 青龙队荣誉晋级8强
- 朱雀队荣誉晋级2强
- 战神队荣誉获得冠军

#### 精英战绩
- 2名精英进入8强

#### 战斗记录
- 第1轮: 犊虎队(胜) VS 明月
- 第2轮: 犊虎队(胜) VS 【情义世家】
- 第3轮: 犊虎队(负) VS 『幻閣不滅◇君臨天下』

（其他战队也有类似的战斗记录）

## 测试步骤

### 1. 测试联盟积分排行

1. 使用任意用户登录（建议使用盟主ID: 4054，属于"暗河|风起云涌"联盟）
2. 访问：`/alliance/competition/alliance-ranking`
3. 验证：
   - 显示【联盟排行】第2026-01-11届
   - 显示说明：(威望为战队总成绩的体现)
   - 显示"您联盟为第2名,好厉害哦!"
   - 显示排行榜：排名.昵称.联盟威望
   - 第1名: 『幻閣不滅◇君臨天下』, 240
   - 第2名: 暗河|风起云涌, 118
   - 等等...

### 2. 测试往届战绩

1. 使用用户ID: 4054 登录（属于"暗河|风起云涌"联盟）
2. 访问：`/alliance/competition/past-records?session=2026-01-11`
3. 验证：
   - 显示【争霸赛往届战绩】第2026-01-11届
   - 显示联盟战绩: 本届威望118,第2名
   - 显示[战队战绩]：
     - 犊虎队荣誉晋级4强
     - 白虎队荣誉晋级4强
     - 青龙队荣誉晋级8强
     - 朱雀队荣誉晋级2强
     - 战神队荣誉获得冠军
   - 显示[精英战绩]: 本届2名精英进入8强
   - 可以按区域筛选查看战斗记录
   - 显示每轮战斗的胜负情况和对手

## 测试用户

### 推荐测试用户

- **用户ID: 4054** - 暗河|风起云涌联盟的盟主（第2名）
  - 可以测试联盟积分排行（显示第2名）
  - 可以测试往届战绩（有完整的战斗记录）

- **用户ID: 4053** - 『幻閣不滅◇君臨天下』联盟的盟主（第1名）
  - 可以测试联盟积分排行（显示第1名）

## 数据清理

如果需要清理测试数据，可以执行：

```sql
-- 删除测试届次的数据（谨慎操作）
DELETE FROM alliance_competition_prestige WHERE session_id = 2;
DELETE FROM alliance_competition_personal_scores WHERE session_id = 2;
DELETE FROM alliance_competition_scores WHERE session_id = 2;
DELETE FROM alliance_competition_battles WHERE session_id = 2;
DELETE FROM alliance_competition_signups WHERE session_id = 2;
DELETE FROM alliance_competition_registrations WHERE session_id = 2;
DELETE FROM alliance_competition_sessions WHERE id = 2;
```

## 注意事项

1. 脚本可以重复运行，会更新现有数据
2. 测试数据基于第2026-01-11届
3. 确保数据库连接配置正确
4. 建议在测试环境运行，避免影响生产数据
