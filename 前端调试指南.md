# å‰ç«¯è°ƒè¯•æŒ‡å— - è´¡çŒ®ç‚¹æ˜¾ç¤ºé—®é¢˜

## âœ… åç«¯APIéªŒè¯ç»“æœ

æ ¹æ®æµ‹è¯•ï¼Œåç«¯APIè¿”å›çš„æ•°æ®æ˜¯**æ­£ç¡®çš„**ï¼š
- ç”¨æˆ· 20057: `contribution: 10, total_contribution: 15`
- APIå“åº”: `{"member_info": {"contribution": 10, "total_contribution": 15}}`

## ğŸ” å‰ç«¯è°ƒè¯•æ­¥éª¤

### æ­¥éª¤1: æ£€æŸ¥APIå“åº”æ•°æ®

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° **Networkï¼ˆç½‘ç»œï¼‰** æ ‡ç­¾
3. åˆ·æ–°é¡µé¢ï¼ˆF5ï¼‰
4. æ‰¾åˆ° `/api/alliance/my` è¯·æ±‚
5. ç‚¹å‡»è¯¥è¯·æ±‚
6. åˆ‡æ¢åˆ° **Responseï¼ˆå“åº”ï¼‰** æˆ– **Previewï¼ˆé¢„è§ˆï¼‰** æ ‡ç­¾
7. **æŸ¥çœ‹ `member_info` éƒ¨åˆ†**ï¼Œç¡®è®¤ï¼š
   ```json
   {
     "member_info": {
       "contribution": 10,
       "total_contribution": 15  // è¿™ä¸ªå€¼åº”è¯¥æ˜¯15ï¼Œä¸æ˜¯10
     }
   }
   ```

### æ­¥éª¤2: æ£€æŸ¥å‰ç«¯æ¥æ”¶çš„æ•°æ®

1. åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­ï¼Œåˆ‡æ¢åˆ° **Consoleï¼ˆæ§åˆ¶å°ï¼‰** æ ‡ç­¾
2. è¾“å…¥ä»¥ä¸‹ä»£ç å¹¶å›è½¦ï¼š
   ```javascript
   // æ£€æŸ¥å½“å‰é¡µé¢çš„è”ç›Ÿæ•°æ®
   console.log('è”ç›Ÿæ•°æ®:', allianceData.value)
   console.log('è´¡çŒ®ç‚¹:', allianceData.value?.member_info?.contribution)
   console.log('å†å²æ€»è´¡çŒ®ç‚¹:', allianceData.value?.member_info?.total_contribution)
   ```
3. **æŸ¥çœ‹è¾“å‡º**ï¼Œç¡®è®¤ `total_contribution` çš„å€¼æ˜¯å¦æ­£ç¡®

### æ­¥éª¤3: æ£€æŸ¥å‰ç«¯æ˜¾ç¤ºå‡½æ•°

1. åœ¨ Console ä¸­è¾“å…¥ï¼š
   ```javascript
   // æ£€æŸ¥æ˜¾ç¤ºå‡½æ•°
   getContributionDisplay()
   ```
2. **æŸ¥çœ‹è¾“å‡º**ï¼Œåº”è¯¥æ˜¾ç¤º `10/15`ï¼ˆä¸æ˜¯ `10/10`ï¼‰

### æ­¥éª¤4: æ£€æŸ¥å‰ç«¯ä»£ç 

1. åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­ï¼Œåˆ‡æ¢åˆ° **Sourcesï¼ˆæºä»£ç ï¼‰** æ ‡ç­¾
2. æ‰¾åˆ° `AlliancePage.vue` æ–‡ä»¶
3. æ‰¾åˆ° `getContributionDisplay` å‡½æ•°ï¼ˆå¤§çº¦åœ¨ç¬¬26è¡Œï¼‰
4. **ç¡®è®¤å‡½æ•°ä»£ç **ï¼š
   ```javascript
   const getContributionDisplay = () => {
     if (!allianceData.value?.member_info) {
       return '0/0'
     }
     const contribution = allianceData.value.member_info.contribution ?? 0
     const totalContribution = allianceData.value.member_info.total_contribution
     
     const total = (totalContribution !== undefined && totalContribution !== null) 
       ? totalContribution 
       : contribution
     
     return `${contribution}/${total}`
   }
   ```

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: APIè¿”å›æ­£ç¡®ï¼Œä½†å‰ç«¯æ˜¾ç¤ºé”™è¯¯

**å¯èƒ½åŸå› **ï¼š
- å‰ç«¯ä»£ç æœªé‡æ–°ç¼–è¯‘
- æµè§ˆå™¨ç¼“å­˜äº†æ—§çš„JavaScriptæ–‡ä»¶

**è§£å†³æ–¹æ³•**ï¼š
1. é‡æ–°ç¼–è¯‘å‰ç«¯ä»£ç ï¼š
   ```bash
   cd interfaces/client
   npm run dev  # æˆ– npm run build
   ```
2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼š
   - æŒ‰ `Ctrl+Shift+Delete` æ¸…é™¤ç¼“å­˜
   - æˆ–ä½¿ç”¨æ— ç—•æ¨¡å¼ï¼ˆCtrl+Shift+Nï¼‰
   - æˆ–æŒ‰ `Ctrl+F5` ç¡¬åˆ·æ–°

### é—®é¢˜2: APIè¿”å›çš„æ•°æ®ä¸­ total_contribution æ˜¯ undefined æˆ– null

**å¯èƒ½åŸå› **ï¼š
- åç«¯è·¯ç”±é€»è¾‘æœ‰é—®é¢˜
- æ•°æ®åº“å­—æ®µä¸º NULL

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥åç«¯æ—¥å¿—
2. è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š`python check_actual_api_response.py`
3. æ£€æŸ¥æ•°æ®åº“ä¸­ `total_contribution` å­—æ®µçš„å€¼

### é—®é¢˜3: å‰ç«¯å‡½æ•°è¿”å›é”™è¯¯çš„å€¼

**å¯èƒ½åŸå› **ï¼š
- `getContributionDisplay()` å‡½æ•°é€»è¾‘æœ‰é—®é¢˜
- æ•°æ®æ²¡æœ‰æ­£ç¡®ä¼ é€’

**è§£å†³æ–¹æ³•**ï¼š
1. åœ¨ Console ä¸­æ£€æŸ¥ `allianceData.value.member_info` çš„å€¼
2. ç¡®è®¤ `total_contribution` å­—æ®µæ˜¯å¦å­˜åœ¨
3. æ£€æŸ¥å‡½æ•°é€»è¾‘æ˜¯å¦æ­£ç¡®

## ğŸ“‹ æ£€æŸ¥æ¸…å•

è¯·æŒ‰ç…§ä»¥ä¸‹æ¸…å•é€ä¸€æ£€æŸ¥ï¼š

- [ ] APIå“åº”ä¸­ `member_info.total_contribution` çš„å€¼æ˜¯å¦æ­£ç¡®ï¼Ÿ
- [ ] å‰ç«¯ `allianceData.value.member_info.total_contribution` çš„å€¼æ˜¯å¦æ­£ç¡®ï¼Ÿ
- [ ] `getContributionDisplay()` å‡½æ•°è¿”å›çš„å€¼æ˜¯å¦æ­£ç¡®ï¼Ÿ
- [ ] å‰ç«¯ä»£ç æ˜¯å¦å·²é‡æ–°ç¼–è¯‘ï¼Ÿ
- [ ] æµè§ˆå™¨ç¼“å­˜æ˜¯å¦å·²æ¸…é™¤ï¼Ÿ
- [ ] æ˜¯å¦ä½¿ç”¨äº†ç¡¬åˆ·æ–°ï¼ˆCtrl+F5ï¼‰ï¼Ÿ

## ğŸ¯ é¢„æœŸç»“æœ

- **APIå“åº”**: `{"member_info": {"contribution": 10, "total_contribution": 15}}`
- **å‰ç«¯æ•°æ®**: `allianceData.value.member_info.total_contribution = 15`
- **æ˜¾ç¤ºç»“æœ**: `è´¡çŒ®: 10/15`

## ğŸ“ å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨

è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
1. APIå“åº”çš„å®Œæ•´JSONï¼ˆä»Networkæ ‡ç­¾å¤åˆ¶ï¼‰
2. Consoleä¸­ `allianceData.value.member_info` çš„è¾“å‡º
3. Consoleä¸­ `getContributionDisplay()` çš„è¾“å‡º
4. æµè§ˆå™¨æ§åˆ¶å°çš„ä»»ä½•é”™è¯¯ä¿¡æ¯
